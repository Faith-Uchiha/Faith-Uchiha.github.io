<?xml version="1.0" encoding="utf-8"?>
<search>
  <entry>
    <title><![CDATA[类加载和初始化顺序的问题]]></title>
    <url>%2F2017%2F09%2F30%2F%E7%B1%BB%E5%8A%A0%E8%BD%BD%E5%92%8C%E5%88%9D%E5%A7%8B%E5%8C%96%E9%A1%BA%E5%BA%8F%E7%9A%84%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[问题再现在为坦克大战的坦克增加血条显示时，采用内部类BloodBlock + 构造方法的写法，这时问题来了，发现血条怎么都画不出来。 下面是问题代码。 TankWar.java中1Tank myTank = new Tank(400,300,true,this); Tank.java中12345678910111213141516171819202122232425262728293031323334353637private int x,y;BloodBlock bb = new BloodBlock(x,y);//感觉参数没传递进去？ public Tank(int x, int y, boolean good) &#123; this.x = x; this.y = y; this.good = good; &#125; public Tank(int x, int y,boolean good,TankFrame tc) &#123; this(x,y,good); this.tc = tc; &#125; public Tank(int x, int y,boolean good,Tank.Direction dir,TankFrame tc) &#123; this(x,y,good,tc); this.dir = dir; &#125; private class BloodBlock &#123; int x ,y; public BloodBlock(int x,int y) &#123; this.x = x; this.y = y; &#125; public void draw(Graphics g) &#123; Color c = g.getColor(); g.setColor(Color.RED); g.drawRect(this.x, this.y-20, WIDTH, 20); g.fillRect(this.x, this.y-20, getLife()*WIDTH/100, 20); g.setColor(c); &#125; &#125; 很自然的将调用过程理解为，调用Tank()构造方法，将400,300传递给内部成员变量x,y； 然后再调用BloodBlock的构造方法，将Tank的x,y赋值给BloodBlock的x,y；画出血条。 实际上，执行过程并不是如此 问题解决这里就涉及到类加载和初始化的顺序问题。 初始化顺序为：静态域（静态变量，静态代码块）-&gt;动态域（成员变量，普通代码块）-&gt;构造器。 1.初次主动使用某各类时，会加载类，此时为static变量分配内存，并设置默认值（0，null，false）。然后开始初始化static域：静态域中各部分执行的先后顺序与代码先后顺序有关（也就是说，静态代码块和静态变量，谁先执行，要看谁写在前面） 2.然后是执行成员变量的初始化和代码块：执行先后顺序也是与代码位置有关 3.最后构造器。 所以，上面的错误就是，在成员变量bb初始化的时候： BloodBlock bb = new BloodBlock(x,y); 这里还未执行Tank的构造方法，所以这个时候Tank的x,y并未赋值，为默认值0。 例子可参考:阿里巴巴14年校招附加题的解析看了这个例子会对初始化过程有更深入的了解。]]></content>
      <categories>
        <category>Java问题汇总</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JavaSE练手项目之问题]]></title>
    <url>%2F2017%2F09%2F28%2FJavaSE%E7%BB%83%E6%89%8B%E9%A1%B9%E7%9B%AE%E4%B9%8B%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[今天在使用 java.util.Random类产生随机数的时候，遇到一个问题。 以下是出问题的代码 123456if(mis_step==0)&#123; mis_step = r.nextInt(5); this.fire();&#125;mis_step --; mis_step在对象new出来之后，成员变量已经用r.next(5)初始化。 在Debug中运行发现：Wacth窗中观察，mis_step会在运行一段时间之后变为负数，过了一会儿又变回了正数。 解决：变为负数的原因是，nextInt(Bound) 返回的值是0~Bound-1的Int类型数 很有可能在if的 mis_step = r.nextInt(5)这个赋值语句中得到0值，随后mis_step –就会变为负数，然后就死掉，不会再有重新复制的机会，炮弹再也不会发出。 看到变回正数的原因是：其实看到的是下一个Tank的mis_step了，而不是自身自动回复。 所以,为了避免出现负数，一般的用法都是 r.nextInt(Bound)+XX]]></content>
      <categories>
        <category>Java问题汇总</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[JavaSESocket编程之问题]]></title>
    <url>%2F2017%2F09%2F16%2FJavaSESocket%E7%BC%96%E7%A8%8B%E4%B9%8B%E9%97%AE%E9%A2%98%2F</url>
    <content type="text"><![CDATA[问题1从标准输入流（即控制台输入）读取字符，不能使用ReadUTF()方法，否则会读取不进来。 问题2使用BufferedReader类的readLine()方法读取System.in的输入之后， 再用WriteUTF()发送给Server，server用ReadUTF()读的话，会抛异常。 解决办法对于问题1改用BufferedReader的ReadLine() 对于问题2尚未解决。个人猜测：因为编码不一样，WriteUTF/ReadUTF是要求Unicode编码，而中文操作系统，从标准输入流输入的应该是GBK编码 待以后深入学习Java能够看Java源码的时候再来解决。 问题2解决：真正的原因并不是编码的问题，即使client端改为PrintWriter类的println方法，server端改为BufferedReader类的readLine()方法，还是会有异常！ 而是没有调用flush()方法！！！。缓冲区没满，不调用flush()，输出流是不会输出的。所以才会抛出异常。 重要： flush()方法何时使用：涉及到缓冲区的类，都应该使用。 建议除了FileOutputStream和FileWriter类，BufferedWriter、DataOutputStream、PrintWriter、ObjectOutputstream等输出流都应该写flush()。 File***输出流是以二进制的形式写入的，所以flush()调用也无效果，可用可不用。 FileOutputStream()没有重写flush()，所以没效果]]></content>
      <categories>
        <category>Java问题汇总</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[指针1]]></title>
    <url>%2F2017%2F08%2F22%2F%E6%8C%87%E9%92%881%2F</url>
    <content type="text"><![CDATA[之前学C语言的时候，指针这一块总觉得很难，一直没有信心完全弄明白。 看过一遍书之后，知识点记得几天然后马上就忘记了。 这次争取完全理解，并且能够熟练应用！]]></content>
      <categories>
        <category>C语言巩固——《C和指针》读书笔记</category>
      </categories>
  </entry>
  <entry>
    <title><![CDATA[First]]></title>
    <url>%2F2017%2F08%2F16%2FFirst%2F</url>
    <content type="text"><![CDATA[这是我建博客后尝试写的一个.md测试 遇到的坑1.yilia主题的所有文章按钮总算是所有东西都弄好了，弄“所有文章”的显示的时候，竟然报错 ERROR plugin load failed hexo-generator-json-content 后来才发现，原来是因为我的node.js的版本太低了 原来我用的是yilia主题，后来发现categories和tags怎么都搞不好。 最后就换了next主题 2.next主题添加站内搜索hexo-generator-searchdb这个也安装了： 1$ npm install hexo-generator-searchdb --save 站点配置文件也改了： 12345search: path: search.xml field: post format: html limit: 10000 一直无法搜索，原来还少了最后一步：主题配置文件 12local_search: enable: true 3.Markdown语法问题使用“```” 这个字符的时候，最好第一个“```”之后，（这里的`是用转义字符“\”打的）回车再写文本 不然很容易和下一个要引用的段穿在一起 还有#后面要空格才能接文本]]></content>
      <categories>
        <category>初入博客</category>
      </categories>
      <tags>
        <tag>随笔</tag>
        <tag>初次尝试</tag>
      </tags>
  </entry>
  <entry>
    <title><![CDATA[Hello World]]></title>
    <url>%2F2017%2F08%2F16%2Fhello-world%2F</url>
    <content type="text"><![CDATA[Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new "My New Post" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment]]></content>
  </entry>
  <entry>
    <title><![CDATA[分类]]></title>
    <url>%2Fcategories%2Findex.html</url>
    <content type="text"></content>
  </entry>
  <entry>
    <title><![CDATA[标签]]></title>
    <url>%2Ftags%2Findex.html</url>
    <content type="text"></content>
  </entry>
</search>
